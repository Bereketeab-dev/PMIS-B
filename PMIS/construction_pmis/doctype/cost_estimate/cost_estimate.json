{
    "name": "Cost Estimate",
    "engine": "InnoDB",
    "is_submittable": 1, # Making it submittable for approval workflow
    "ischild": 0,
    "issingle": 0,
    "istable": 0,
    "module": "Construction PMIS",
    "autoname": "format:CE-{project}-{#####}",
    "creation": "YYYY-MM-DD HH:MM:SS.NNNNNN",
    "modified": "YYYY-MM-DD HH:MM:SS.NNNNNN",
    "modified_by": "Administrator",
    "owner": "Administrator",
    "permissions": [
        {
            "role": "System Manager",
            "read": 1,
            "write": 1,
            "create": 1,
            "delete": 1,
            "submit": 1,
            "cancel": 1,
            "amend": 1,
            "report": 1,
            "share": 1
        }
        # Add other roles like "Project Manager", "Estimator" as needed
    ],
    "links": [
        {
            "link_doctype": "Project",
            "link_fieldname": "project"
        }
    ],
    "sort_field": "modified",
    "sort_order": "DESC",
    "track_changes": 1,
    "allow_copy": 1,
    "fields": [
        {
            "fieldname": "estimate_id_display",
            "label": "Estimate ID",
            "fieldtype": "Data",
            "bold": 1,
            "in_list_view": 1,
            "fetch_from": "name", # To display the autoname
            "read_only": 1
        },
        {
            "fieldname": "project",
            "label": "Project",
            "fieldtype": "Link",
            "options": "Project",
            "reqd": 1,
            "in_list_view": 1
        },
        {
            "fieldname": "status",
            "label": "Status",
            "fieldtype": "Select",
            "options": "Draft\nSubmitted\nApproved\nRejected\nCancelled",
            "default": "Draft",
            "reqd": 1,
            "in_list_view": 1,
            "read_only_depends_on": "eval:doc.docstatus !== 0"
        },
        {
            "fieldname": "column_break_1",
            "fieldtype": "Column Break"
        },
        {
            "fieldname": "date",
            "label": "Date",
            "fieldtype": "Date",
            "default": "Today",
            "reqd": 1
        },
        {
            "fieldname": "version",
            "label": "Version / Revision",
            "fieldtype": "Data",
            "default": "1.0"
        },
        {
            "fieldname": "total_estimated_cost",
            "label": "Total Estimated Cost",
            "fieldtype": "Currency",
            "read_only": 1,
            "bold": 1,
            "in_list_view": 1
            # Calculation will be done in python
        },
        {
            "fieldname": "boq_items_section",
            "label": "Bill of Quantities (BOQ)",
            "fieldtype": "Section Break"
        },
        {
            "fieldname": "boq_items",
            "label": "BOQ Items",
            "fieldtype": "Table",
            "options": "BOQ Item",
            "reqd": 1,
            "cannot_add_rows_if_submitted": 1
        },
        {
            "fieldname": "notes_section",
            "label": "Notes and Attachments",
            "fieldtype": "Section Break",
            "collapsible": 1
        },
        {
            "fieldname": "notes",
            "label": "Notes",
            "fieldtype": "Text Editor"
        },
        {
            "fieldname": "attachments",
            "label": "Attachments",
            "fieldtype": "Attach"
        }
    ],
    "settings_for_print": {
        "print_heading": "Cost Estimate / BOQ"
    }
}
